(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{2714:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var a=s(5155);s(2115);var r=s(968),n=s(3999);function i(e){let{className:t,...s}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},3529:(e,t,s)=>{Promise.resolve().then(s.bind(s,9430))},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(5155);s(2115);var r=s(9708),n=s(2085),i=s(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:n,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...d})}},9430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var a=s(5155),r=s(2115),n=s(5695),i=s(7168),l=s(9852),o=s(4011),d=s(3999);function c(e){let{className:t,...s}=e;return(0,a.jsx)(o.bL,{"data-slot":"avatar",className:(0,d.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(o.H4,{"data-slot":"avatar-fallback",className:(0,d.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...s})}var u=s(9963),x=s(6474),h=s(5196),g=s(7863);function f(e){let{...t}=e;return(0,a.jsx)(u.bL,{"data-slot":"select",...t})}function p(e){let{...t}=e;return(0,a.jsx)(u.WT,{"data-slot":"select-value",...t})}function b(e){let{className:t,size:s="default",children:r,...n}=e;return(0,a.jsxs)(u.l9,{"data-slot":"select-trigger","data-size":s,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,a.jsx)(u.In,{asChild:!0,children:(0,a.jsx)(x.A,{className:"size-4 opacity-50"})})]})}function j(e){let{className:t,children:s,position:r="popper",...n}=e;return(0,a.jsx)(u.ZL,{children:(0,a.jsxs)(u.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,a.jsx)(N,{}),(0,a.jsx)(u.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(y,{})]})})}function v(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(u.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(h.A,{className:"size-4"})})}),(0,a.jsx)(u.p4,{children:s})]})}function N(e){let{className:t,...s}=e;return(0,a.jsx)(u.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(g.A,{className:"size-4"})})}function y(e){let{className:t,...s}=e;return(0,a.jsx)(u.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(x.A,{className:"size-4"})})}var w=s(2714),k=s(5452),z=s(4416);function C(e){let{...t}=e;return(0,a.jsx)(k.bL,{"data-slot":"sheet",...t})}function A(e){let{...t}=e;return(0,a.jsx)(k.l9,{"data-slot":"sheet-trigger",...t})}function S(e){let{...t}=e;return(0,a.jsx)(k.ZL,{"data-slot":"sheet-portal",...t})}function I(e){let{className:t,...s}=e;return(0,a.jsx)(k.hJ,{"data-slot":"sheet-overlay",className:(0,d.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function _(e){let{className:t,children:s,side:r="right",...n}=e;return(0,a.jsxs)(S,{children:[(0,a.jsx)(I,{}),(0,a.jsxs)(k.UC,{"data-slot":"sheet-content",className:(0,d.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[s,(0,a.jsxs)(k.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(z.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function E(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-header",className:(0,d.cn)("flex flex-col gap-1.5 p-4",t),...s})}function T(e){let{className:t,...s}=e;return(0,a.jsx)(k.hE,{"data-slot":"sheet-title",className:(0,d.cn)("text-foreground font-semibold",t),...s})}function O(e){let{className:t,...s}=e;return(0,a.jsx)(k.VY,{"data-slot":"sheet-description",className:(0,d.cn)("text-muted-foreground text-sm",t),...s})}var U=s(7580),D=s(4357),L=s(7550),q=s(381),P=s(4869),J=s(1154),M=s(1497),$=s(2486),V=s(4060),K=s(1934),R=s(9613);function Y(e){let{delayDuration:t=0,...s}=e;return(0,a.jsx)(R.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function Z(e){let{...t}=e;return(0,a.jsx)(Y,{children:(0,a.jsx)(R.bL,{"data-slot":"tooltip",...t})})}function F(e){let{...t}=e;return(0,a.jsx)(R.l9,{"data-slot":"tooltip-trigger",...t})}function X(e){let{className:t,sideOffset:s=0,children:r,...n}=e;return(0,a.jsx)(R.ZL,{children:(0,a.jsxs)(R.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,d.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,(0,a.jsx)(R.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}let G=[{name:"Original",code:"original"},{name:"Hindi",code:"hi",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"Tamil",code:"ta",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"Bengali",code:"bn",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"Telugu",code:"te",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"Marathi",code:"mr",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"Gujarati",code:"gu",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"Kannada",code:"kn",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{name:"English",code:"en",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{name:"Spanish",code:"es",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{name:"Chinese",code:"zh",flag:"\uD83C\uDDE8\uD83C\uDDF3"}],H=(0,V.UU)("https://ybrgqoihnwdrwpbnvzzn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlicmdxb2lobndkcndwYm52enpuIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTAzODczMDYsImV4cCI6MjAwNTk2MzMwNn0.DrI3lchC3YChlOns9LnRE9Hptt4OSiCnGOpilTId1qs");function B(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),s=(0,n.useSearchParams)(),o=t.sessionID,d=s.get("username")||"Anonymous",[u,x]=(0,r.useState)([]),[g,N]=(0,r.useState)({}),[y,k]=(0,r.useState)(""),[z,S]=(0,r.useState)([]),[I,V]=(0,r.useState)("original"),[R,B]=(0,r.useState)(""),[Q,W]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1),[er,en]=(0,r.useState)(!1),[ei,el]=(0,r.useState)(""),[eo,ed]=(0,r.useState)(""),ec=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("sutraApiKey");return e&&B(e),eu(),ex(),eh(),()=>{eg()}},[o,d]),(0,r.useEffect)(()=>{em()},[u]),(0,r.useEffect)(()=>{if("original"===I||!R)return;let e=!1;for(let t of u)if(!g["".concat(t.id,"-").concat(I)]){e=!0;break}e&&(async()=>{et(!0);try{let e={},t=[];for(let s of u){let a="".concat(s.id,"-").concat(I);g[a]||t.push(ep(s.text,I).then(t=>{e[a]=t}).catch(e=>{console.error("Translation error for message ".concat(s.id,":"),e)}))}await Promise.all(t),Object.keys(e).length>0&&N(t=>({...t,...e}))}finally{et(!1)}})()},[I,u,R,g]);let em=()=>{var e;null==(e=ec.current)||e.scrollIntoView({behavior:"smooth"})},eu=async()=>{try{let{data:e}=await H.from("multilingual_chat").select("*").eq("sessionid",o).single();e?(x(e.msgs||[]),S(e.users||[])):(await H.from("multilingual_chat").insert([{sessionid:o,users:[d],msgs:[],created_at:new Date().toISOString()}]),S([d]))}catch(e){console.error("Error joining room:",e)}},ex=()=>{let e=H.channel("room:".concat(o)).on("postgres_changes",{event:"UPDATE",schema:"public",table:"multilingual_chat",filter:"sessionid=eq.".concat(o)},e=>{if(e.new){let t=e.new;x(t.msgs||[]),S(t.users||[])}}).subscribe();return()=>{H.removeChannel(e)}},eh=async()=>{try{let{data:e}=await H.from("multilingual_chat").select("users").eq("sessionid",o).single();if(e){let t=e.users||[];if(!t.includes(d)){let e=[...t,d];await H.from("multilingual_chat").update({users:e}).eq("sessionid",o)}}}catch(e){console.error("Error adding user to room:",e)}},eg=async()=>{try{let{data:e}=await H.from("multilingual_chat").select("users").eq("sessionid",o).single();if(e){let t=(e.users||[]).filter(e=>e!==d);await H.from("multilingual_chat").update({users:t}).eq("sessionid",o)}}catch(e){console.error("Error removing user from room:",e)}},ef=async()=>{if(y.trim()&&!es)try{ea(!0);let e={id:crypto.randomUUID(),username:d,text:y,timestamp:Date.now()},{data:t,error:s}=await H.from("multilingual_chat").select("msgs").eq("sessionid",o).single();if(s){console.error("Error fetching room:",s),alert("Error fetching room: ".concat(s.message));return}let a=[...(null==t?void 0:t.msgs)||[],e],{error:r}=await H.from("multilingual_chat").update({msgs:a}).eq("sessionid",o);if(r){console.error("Error updating room:",r),alert("Error sending message: ".concat(r.message));return}k("")}catch(e){console.error("Error sending message:",e),alert("Unexpected error: ".concat(e instanceof Error?e.message:String(e)))}finally{ea(!1)}},ep=async(e,t)=>{if(!R||"original"===t)return e;try{let s=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,targetLanguage:t,sutraApiKey:R,stream:!1})});if(!s.ok)throw Error("Translation failed");return(await s.json()).translatedText}catch(t){return console.error("Translation error:",t),e+" (translation failed)"}},eb=e=>"original"===I?e.text:g["".concat(e.id,"-").concat(I)]||e.text,ej=()=>{navigator.clipboard.writeText(o),W(!0),setTimeout(()=>W(!1),2e3)},ev=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),eN=()=>G.find(e=>e.code===I)||G[0],ey=e=>{let t=["bg-indigo-500","bg-blue-500","bg-green-500","bg-amber-500","bg-rose-500","bg-purple-500","bg-teal-500","bg-cyan-500","bg-pink-500"],s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);let a=Math.abs(s)%t.length;return t[a]};return(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-slate-50",children:[(0,a.jsx)(C,{open:er,onOpenChange:en,children:(0,a.jsx)(_,{side:"left",className:"w-full max-w-sm p-0",children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)(E,{className:"px-6 py-4 border-b",children:[(0,a.jsx)(T,{className:"text-lg font-semibold",children:"Active Users"}),(0,a.jsxs)(O,{children:[z.length," ",1===z.length?"participant":"participants"," in this chat"]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:z.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white shadow-sm border border-slate-100",children:[(0,a.jsx)(c,{className:"h-10 w-10",children:(0,a.jsx)(m,{className:"".concat(ey(e)),children:e.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e===d?"(you)":""})]})]},t))})})]})})}),(0,a.jsxs)("aside",{className:"hidden lg:flex flex-col w-72 border-r border-slate-200 bg-white",children:[(0,a.jsx)("div",{className:"p-5 border-b border-slate-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),"Active Users (",z.length,")"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,a.jsx)("div",{className:"space-y-3",children:z.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[(0,a.jsx)(c,{className:"h-9 w-9",children:(0,a.jsx)(m,{className:"".concat(ey(e)," text-white"),children:e.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e}),e===d&&(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"(you)"})]})]},t))})}),(0,a.jsx)("div",{className:"p-4 border-t border-slate-200",children:(0,a.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 text-sm text-slate-700",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Session ID"}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("code",{className:"text-xs bg-white px-2 py-1 rounded border overflow-hidden text-ellipsis",children:o}),(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:ej,children:Q?(0,a.jsx)(h.A,{className:"h-3.5 w-3.5"}):(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"})})]})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("header",{className:"border-b bg-white shadow-sm px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>e.push("/"),className:"rounded-full",children:(0,a.jsx)(L.A,{className:"h-5 w-5"})}),(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"lg:hidden flex items-center gap-1.5 rounded-full border border-slate-200",onClick:()=>en(!0),children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:z.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-semibold text-lg",children:"Multilingual Chat Room"}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 hidden sm:block",children:["Connected as ",(0,a.jsx)("span",{className:"font-medium text-slate-700",children:d})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y,{children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(F,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"outline",size:"sm",className:"text-sm flex items-center gap-1.5 rounded-full lg:hidden",onClick:ej,children:[Q?(0,a.jsx)(h.A,{className:"h-3.5 w-3.5"}):(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:Q?"Copied":"Copy ID"})]})}),(0,a.jsx)(X,{children:(0,a.jsxs)("p",{children:["Copy session ID: ",o.substring(0,8),"..."]})})]})}),(0,a.jsxs)(C,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"outline",size:"icon",className:"h-9 w-9 rounded-full",children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(_,{className:"bg-slate-50 p-4",children:[(0,a.jsxs)(E,{children:[(0,a.jsx)(T,{children:"Chat Settings"}),(0,a.jsx)(O,{children:"Configure chat preferences and translation settings"})]}),(0,a.jsx)("div",{className:"py-6 space-y-5",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(w.J,{htmlFor:"sutraApiKey",children:"Sutra API Key"}),(0,a.jsx)(l.p,{id:"sutraApiKey",type:"password",value:R,onChange:e=>{B(e.target.value),localStorage.setItem("sutraApiKey",e.target.value)},placeholder:"Enter your Sutra API key for translations",className:"border-slate-200"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Required for translation features"})]})})]})]})]})]}),(0,a.jsxs)("div",{className:"border-b bg-white px-4 py-2.5 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-indigo-500"}),(0,a.jsxs)(f,{value:I,onValueChange:V,children:[(0,a.jsx)(b,{className:"bg-transparent border border-slate-200 rounded-full h-8 w-[180px] text-sm",children:(0,a.jsx)(p,{placeholder:"Select Language"})}),(0,a.jsxs)(j,{children:[G.map(e=>(0,a.jsx)(v,{value:e.code,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.flag&&(0,a.jsx)("span",{children:e.flag}),(0,a.jsx)("span",{children:e.name})]})},e.code)),(0,a.jsxs)("div",{className:"p-2 border-t flex flex-col gap-2 mt-1",children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Add Custom Language"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.p,{placeholder:"Language Name",value:ei,onChange:e=>el(e.target.value),className:"h-8 text-xs"}),(0,a.jsx)(l.p,{placeholder:"Code (e.g. fr)",value:eo,onChange:e=>ed(e.target.value),className:"h-8 text-xs w-20"})]}),(0,a.jsx)(i.$,{size:"sm",className:"w-full h-8 mt-1",onClick:()=>{ei&&eo&&(V(eo),G.some(e=>e.code===eo)||G.push({name:ei,code:eo,flag:"\uD83C\uDF10"}),el(""),ed(""))},disabled:!ei||!eo,children:"Add"})]})]})]}),"original"!==I&&!R&&(0,a.jsx)("span",{className:"text-xs text-red-500 hidden sm:inline-block",children:"Set Sutra API key in settings"})]}),ee&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-indigo-600",children:[(0,a.jsx)(J.A,{className:"h-3 w-3 animate-spin"}),"Translating..."]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{backgroundImage:"radial-gradient(circle at 1rem 1rem, rgba(224, 231, 255, 0.15) 1rem, transparent 1rem)",backgroundSize:"3rem 3rem"},children:[0===u.length?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(M.A,{className:"h-8 w-8 text-indigo-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-800",children:"No messages yet"}),(0,a.jsx)("p",{className:"text-slate-500 max-w-sm mt-1",children:"Start the conversation by sending your first message below."})]}):u.map((e,t)=>{let s=e.username===d,r=0===t||u[t-1].username!==e.username;return(0,a.jsxs)(K.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"flex gap-2 ".concat(s?"justify-end":"justify-start"),children:[!s&&r&&(0,a.jsx)(c,{className:"h-8 w-8 mt-1",children:(0,a.jsx)(m,{className:"".concat(ey(e.username)," text-white text-xs"),children:e.username.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-2.5 shadow-sm ".concat(s?"bg-gradient-to-br from-indigo-600 to-indigo-700 text-white":"bg-white border border-slate-200"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[!s&&(0,a.jsx)("span",{className:"font-medium text-sm text-slate-700",children:e.username}),(0,a.jsx)("span",{className:"text-xs ".concat(s?"text-indigo-100":"text-slate-400"),children:ev(e.timestamp)})]}),(0,a.jsx)("p",{className:"".concat("original"!==I&&!g["".concat(e.id,"-").concat(I)]&&"opacity-80"),children:eb(e)})]}),s&&r&&(0,a.jsx)(c,{className:"h-8 w-8 mt-1",children:(0,a.jsx)(m,{className:"".concat(ey(e.username)," text-white text-xs"),children:e.username.charAt(0).toUpperCase()})})]},e.id)}),(0,a.jsx)("div",{ref:ec,className:"pt-2"})]}),(0,a.jsxs)("div",{className:"border-t bg-white p-3 shadow-sm",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),ef()},className:"flex gap-2 items-center",children:[(0,a.jsx)(l.p,{value:y,onChange:e=>k(e.target.value),placeholder:"Type a message...",className:"flex-1 border-slate-200 bg-slate-50 focus-visible:bg-white transition-colors rounded-full py-5",disabled:es}),(0,a.jsxs)(i.$,{type:"submit",disabled:!y.trim()||es,className:"rounded-full bg-indigo-600 hover:bg-indigo-700",children:[es?(0,a.jsx)(J.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)($.A,{className:"h-4 w-4 mr-2"}),"Send"]})]}),"original"!==I&&(0,a.jsx)("div",{className:"mt-2 text-center lg:hidden",children:(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Viewing messages in ",eN().flag," ",eN().name]})})]})]})]})}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(5155);s(2115);var r=s(3999);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}}},e=>{var t=t=>e(e.s=t);e.O(0,[10,452,441,684,358],()=>t(3529)),_N_E=e.O()}]);